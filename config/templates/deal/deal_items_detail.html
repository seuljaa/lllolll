{% extends "layout.html" %}
{% load django_bootstrap5 %}
{% load humanize %}
{% block content %}
<div class="container t-text-center t-w-1/2">
    <div class="t-flex t-justify">
        <div class="t-text-left">
            {%if detail.sale_buy == True %}
            <p class="t-font-bold"><span
                    style=" border-radius: 15px 15px 0 0; border-bottom: 2px solid #B2E0F7; padding: 1em; background: #D8EFFB;">삽니다</span>
            </p>
            {% else %}
            <p class="t-font-bold"><span
                    style=" border-radius: 15px 15px 0 0; border-bottom: 2px solid #B2E0F7; padding: 1em; background: #D8EFFB;">팝니다</span>
            </p>
            {% endif %}
        </div>
        <div class="t-text-left t-ml-1">
            {%if detail.is_complete == True %}
            <p class="t-font-bold"><span
                    style=" border-radius: 15px 15px 0 0; border-bottom: 2px solid #000000; padding: 1em; background: #BFBFBF;">거래완료</span>
            </p>
            {% else %}
            {% if detail.sale_buy == True %}
            <p class="t-font-bold"><span
                    style=" border-radius: 15px 15px 0 0; border-bottom: 2px solid #F7B2B2; padding: 1em; background: #FBD8D8;">구매중</span>
            </p>
            {% else %}
            <p class="t-font-bold"><span
                    style=" border-radius: 15px 15px 0 0; border-bottom: 2px solid #F7B2B2; padding: 1em; background: #FBD8D8;">판매중</span>
            </p>
            {% endif %}
            {% endif %}
        </div>
    </div>
    <div class="t-bg-gray-200 t-p-2 t-text-xl">
            {{ detail.subject }}
        </div>
    <div class="t-border-solid t-border t-border-gray-300">
        <div class="t-text-right t-p-2">
            작성자 : {{ detail.user }}
        </div>
        <div class="t-text-left t-ml-3">
            <button id="ss" class="btn btn-sm collapsed btn-outline-success" type="button" data-bs-toggle="collapse"
                    data-bs-target="#demo">
                📌상세정보
            </button>
            <div class="collapse " id="demo">
                <div class="t-flex t-justify">
                    <div class="card card-body t-w-1/2 t-bg-green-50">
                        <table class="table table-hover t-text-center t-align-middle">
                            <thead>
                            <tr class="thead-dark">
                                <th>직업군</th>
                                <th>종류</th>
                                <th>부위</th>
                                <th>스타포스</th>
                                <th>윗잠</th>
                                <th>아랫잠</th>
                                <th>가격</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{ detail.group }}</td>
                                {% if detail.kind == '선택해주세요.' %}
                                <td>❌</td>
                                {% else %}
                                <td>{{ detail.kind }}</td>
                                {% endif %}
                                {% if detail.kind == '선택해주세요.' %}
                                <td>❌</td>
                                {% else %}
                                <td>{{ detail.part }}</td>
                                {% endif %}
                                <td>{{ detail.star_force }}</td>
                                <td>{{ detail.ability_1 }}</td>
                                <td>{{ detail.ability_2 }}</td>
                                <td>
                                    {{ detail.price|intcomma }}
                                    {% if detail.price_kind == True %}
                                    억
                                    {% else %}
                                    엄
                                    {% endif %}
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="t-p-8 t-border-gray-400 t-border-solid t-border-t t-border-r-0 t-border-b-0 t-border-l-0 t-mt-3 t-mx-3">
            {{ detail.content | safe }}
        </div>
        <div class="t-p-3 t-border-gray-400 t-border-solid t-border-t t-border-r-0 t-border-b-0 t-border-l-0">
            <div class="t-pb-3">
                {% if detail.comment_set.count > 0 %}
                {% for comment in detail.comment_set.all %}
                <div class="t-flex">
                    <div class="t-font-bold">
                        {{ comment.user }}&nbsp;&nbsp;
                    </div>
                    {{ comment.content }}<br>
                </div>
                {% endfor %}
                {% else %}
                <div style="opacity:0.7;">
                    작성된 댓글이 없습니다💦
                </div>
                {% endif %}
            </div>
            <div class="t-pt-3 t-border-gray-400 t-border-solid t-border-t t-border-r-0 t-border-b-0 t-border-l-0">
                <div class="t-text-left">
                    <form method="POST" action="{% url 'comment:comment_deal' detail.id %}">
                        {% csrf_token %}
                        {{user}}
                        <input type="text" name="comment" id="comment" placeholder="댓글입력..."
                               style="border:none; width:700px; ">
                        <input type="submit" style="border:none; background-color:white; color:skyblue;" value="게시">
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}